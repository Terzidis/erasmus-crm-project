# Erasmus CRM Project

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)
![React](https://img.shields.io/badge/React-19.x-61dafb.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

**ÎœÎ¹Î± ÏƒÏ„Î±Î¸ÎµÏÎ®, Î±ÏƒÏ†Î±Î»Î® ÎºÎ±Î¹ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎ¹Î¼Î· Î²Î¬ÏƒÎ· CRM Î³Î¹Î± Ï„Î· Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Ï€ÎµÎ»Î±Ï„ÎµÎ¹Î±ÎºÏÎ½ ÏƒÏ‡Î­ÏƒÎµÏ‰Î½**

</div>

---

## ğŸ“‹ Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®

Î¤Î¿ Erasmus CRM ÎµÎ¯Î½Î±Î¹ Î­Î½Î± Î¿Î»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Ï€ÎµÎ»Î±Ï„ÎµÎ¹Î±ÎºÏÎ½ ÏƒÏ‡Î­ÏƒÎµÏ‰Î½ (Customer Relationship Management) Ï€Î¿Ï… Î±Î½Î±Ï€Ï„ÏÏ‡Î¸Î·ÎºÎµ ÏƒÏ„Î¿ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ Ï„Î¿Ï… Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚ Erasmus. Î£Ï‡ÎµÎ´Î¹Î¬ÏƒÏ„Î·ÎºÎµ Î¼Îµ ÏƒÏÎ³Ï‡ÏÎ¿Î½ÎµÏ‚ Ï„ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯ÎµÏ‚ ÎºÎ±Î¹ Î²Î­Î»Ï„Î¹ÏƒÏ„ÎµÏ‚ Ï€ÏÎ±ÎºÏ„Î¹ÎºÎ­Ï‚ Î³Î¹Î± Î½Î± Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Î¼Î¹Î± ÏƒÏ„Î±Î¸ÎµÏÎ® Î²Î¬ÏƒÎ· Î³Î¹Î± Ï„Î¹Ï‚ ÎµÏ€ÏŒÎ¼ÎµÎ½ÎµÏ‚ Ï†Î¬ÏƒÎµÎ¹Ï‚ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·Ï‚.

### Î£Ï„ÏŒÏ‡Î¿Î¹ ÎˆÏÎ³Î¿Ï…

- âœ… **Î£Ï„Î±Î¸ÎµÏÏŒÏ„Î·Ï„Î±**: Î‘Î¾Î¹ÏŒÏ€Î¹ÏƒÏ„Î· Î±ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ® Î¼Îµ type-safe ÎºÏÎ´Î¹ÎºÎ±
- âœ… **Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±**: JWT authentication ÎºÎ±Î¹ role-based access control
- âœ… **Î•Ï€ÎµÎºÏ„Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±**: Modular design ÎºÎ±Î¹ Docker-ready deployment

---

## ğŸš€ Features

### Core Modules

| Module | Description |
|--------|-------------|
| **Contact Management** | Î Î»Î®ÏÎ·Ï‚ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎµÏ€Î±Ï†ÏÎ½ Î¼Îµ CRUD, Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎºÎ±Î¹ Ï†Î¹Î»Ï„ÏÎ¬ÏÎ¹ÏƒÎ¼Î± |
| **Company Management** | Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎµÏ„Î±Î¹ÏÎµÎ¹ÏÎ½ Î¼Îµ industry classification |
| **Deals Pipeline** | 6-stage pipeline Î¼Îµ value ÎºÎ±Î¹ probability tracking |
| **Activity Tracking** | ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® ÎºÎ»Î®ÏƒÎµÏ‰Î½, emails, meetings, tasks |
| **Dashboard Analytics** | Real-time ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ ÎºÎ±Î¹ interactive charts |
| **User Management** | Role-based access (admin/user) |

### Technical Highlights

- ğŸ” **Authentication**: Manus OAuth + JWT sessions
- ğŸ“Š **Type-safe API**: tRPC Î¼Îµ end-to-end TypeScript
- ğŸ¨ **Modern UI**: React 19 + TailwindCSS 4 + shadcn/ui
- ğŸ—„ï¸ **Database**: MySQL Î¼Îµ Drizzle ORM
- ğŸ§ª **Testing**: Vitest Î¼Îµ 13 unit tests
- ğŸ³ **DevOps**: Docker + GitHub Actions CI/CD

---

## ğŸ› ï¸ Technology Stack

### Backend

| Technology | Version | Purpose |
|------------|---------|---------|
| Node.js | 22.x | Runtime environment |
| TypeScript | 5.x | Static typing |
| tRPC | 11.x | Type-safe API |
| Express | 4.x | HTTP server |
| Drizzle ORM | 0.44.x | Database ORM |
| MySQL | 8.x | Database |
| JWT | - | Authentication |
| Zod | 4.x | Validation |

### Frontend

| Technology | Version | Purpose |
|------------|---------|---------|
| React | 19.x | UI library |
| Vite | 7.x | Build tool |
| TailwindCSS | 4.x | Styling |
| shadcn/ui | - | UI components |
| Recharts | 2.x | Charts |
| Wouter | 3.x | Routing |

### DevOps

| Technology | Purpose |
|------------|---------|
| Docker | Containerization |
| Docker Compose | Local development |
| GitHub Actions | CI/CD pipeline |
| Vitest | Testing framework |
| pnpm | Package manager |

---

## ğŸ“ Project Structure

```
erasmus-crm-project/
â”œâ”€â”€ client/                 # Frontend application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ pages/          # Page components
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx    # Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ Contacts.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Companies.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Deals.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Activities.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AdminUsers.tsx
â”‚   â”‚   â”œâ”€â”€ contexts/       # React contexts
â”‚   â”‚   â”œâ”€â”€ hooks/          # Custom hooks
â”‚   â”‚   â”œâ”€â”€ lib/            # Utilities
â”‚   â”‚   â”œâ”€â”€ App.tsx         # Routes
â”‚   â”‚   â””â”€â”€ index.css       # Global styles
â”‚   â””â”€â”€ public/             # Static assets
â”œâ”€â”€ server/                 # Backend application
â”‚   â”œâ”€â”€ _core/              # Framework internals
â”‚   â”œâ”€â”€ db.ts               # Database queries
â”‚   â”œâ”€â”€ routers.ts          # tRPC procedures
â”‚   â”œâ”€â”€ storage.ts          # S3 helpers
â”‚   â””â”€â”€ *.test.ts           # Unit tests
â”œâ”€â”€ drizzle/                # Database schema
â”‚   â””â”€â”€ schema.ts           # Table definitions
â”œâ”€â”€ shared/                 # Shared types/constants
â”œâ”€â”€ .github/workflows/      # CI/CD configuration
â”œâ”€â”€ Dockerfile              # Container definition
â”œâ”€â”€ docker-compose.yml      # Local development
â””â”€â”€ package.json            # Dependencies
```

---

## ğŸ—„ï¸ Database Schema

### Tables

| Table | Description |
|-------|-------------|
| `users` | User accounts with roles |
| `contacts` | Customer contacts |
| `companies` | Organizations |
| `deals` | Sales opportunities |
| `activities` | Tasks and interactions |
| `tags` | Contact categorization |
| `contactTags` | Many-to-many relation |

### Entity Relationships

```
Users â”€â”¬â”€> Contacts â”€â”¬â”€> Activities
       â”‚             â”‚
       â”‚             â””â”€> ContactTags <â”€â”€ Tags
       â”‚
       â””â”€> Companies â”€â”¬â”€> Contacts
                      â”‚
                      â””â”€> Deals â”€â”€> Activities
```

---

## ğŸš€ Getting Started

### Prerequisites

- Node.js 22.x
- pnpm 10.x
- MySQL 8.x (or use Docker)

### Installation

```bash
# Clone the repository
git clone <repository-url>
cd erasmus-crm-project

# Install dependencies
pnpm install

# Set up environment variables
cp .env.example .env
# Edit .env with your configuration

# Push database schema
pnpm db:push

# Start development server
pnpm dev
```

### Using Docker

```bash
# Build and start all services
docker-compose up -d

# View logs
docker-compose logs -f app
```

---

## ğŸ“ Available Scripts

| Command | Description |
|---------|-------------|
| `pnpm dev` | Start development server |
| `pnpm build` | Build for production |
| `pnpm start` | Start production server |
| `pnpm test` | Run unit tests |
| `pnpm check` | TypeScript type check |
| `pnpm format` | Format code with Prettier |
| `pnpm db:push` | Push schema to database |

---

## ğŸ” Authentication

The application uses Manus OAuth for authentication:

1. User clicks "Login" button
2. Redirected to Manus OAuth portal
3. After authentication, redirected back with session cookie
4. JWT token stored in HTTP-only cookie
5. Protected routes check `ctx.user` in tRPC procedures

### Roles

| Role | Permissions |
|------|-------------|
| `user` | CRUD on own data |
| `admin` | Full access + user management |

---

## ğŸ§ª Testing

```bash
# Run all tests
pnpm test

# Run with coverage
pnpm test --coverage

# Run specific test file
pnpm test server/crm.test.ts
```

### Test Coverage

- âœ… Authentication procedures
- âœ… Contact CRUD operations
- âœ… Deal management
- âœ… Activity tracking
- âœ… Dashboard statistics
- âœ… Admin procedures

---

## ğŸ³ Deployment

### Docker Deployment

```bash
# Build image
docker build -t erasmus-crm .

# Run container
docker run -p 3000:3000 \
  -e DATABASE_URL=<your-db-url> \
  -e JWT_SECRET=<your-secret> \
  erasmus-crm
```

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `DATABASE_URL` | MySQL connection string | Yes |
| `JWT_SECRET` | Session signing secret | Yes |
| `VITE_APP_ID` | Manus OAuth app ID | Yes |
| `OAUTH_SERVER_URL` | OAuth backend URL | Yes |
| `VITE_OAUTH_PORTAL_URL` | OAuth portal URL | Yes |

---

## ğŸ“Š API Reference

### tRPC Procedures

#### Contacts
- `contacts.list` - List all contacts
- `contacts.get` - Get contact by ID
- `contacts.create` - Create new contact
- `contacts.update` - Update contact
- `contacts.delete` - Delete contact
- `contacts.byStatus` - Group by status

#### Companies
- `companies.list` - List all companies
- `companies.get` - Get company by ID
- `companies.create` - Create new company
- `companies.update` - Update company
- `companies.delete` - Delete company

#### Deals
- `deals.list` - List all deals
- `deals.get` - Get deal by ID
- `deals.create` - Create new deal
- `deals.update` - Update deal
- `deals.delete` - Delete deal
- `deals.pipelineStats` - Pipeline statistics

#### Activities
- `activities.list` - List all activities
- `activities.create` - Create new activity
- `activities.update` - Update activity
- `activities.complete` - Mark as complete
- `activities.delete` - Delete activity
- `activities.recent` - Get recent activities

#### Dashboard
- `dashboard.stats` - Get dashboard statistics

#### Users (Admin only)
- `users.list` - List all users
- `users.updateRole` - Update user role

---

## ğŸ”® Future Phases

### Phase 2 (Planned)
- [ ] Email integration
- [ ] Calendar sync
- [ ] Advanced reporting
- [ ] Data export (CSV/Excel)

### Phase 3 (Planned)
- [ ] Mobile application
- [ ] API integrations
- [ ] Automation workflows
- [ ] Multi-language support

---

## ğŸ“„ License

This project is licensed under the MIT License.

---

## ğŸ‘¥ Contributors

Developed as part of the Erasmus Programme.

---

<div align="center">

**Erasmus CRM Project** - Phase 1 Complete âœ…

Built with â¤ï¸ using React, tRPC, and MySQL

</div>
